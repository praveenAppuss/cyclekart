{% extends 'admin_base.html' %}
{% load static %}

{% block content %}
<div class="min-h-screen bg-gray-100 px-4 py-6">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-semibold text-gray-800 mb-4">{% if form.coupon_id %}Edit Coupon{% else %}Add New Coupon{% endif %}</h1>
        <div class="text-right mt-4">
            <a href="{% url 'coupon_list' %}" 
               class="inline-block text-blue-600 hover:text-blue-800 text-sm font-medium">
               Back to Coupon List
            </a>
        </div>

        <div class="bg-white shadow-sm rounded-sm p-4">
            <form method="POST" action="">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="code" class="block text-sm font-medium text-gray-700">Coupon Code</label>
                    <input type="text" id="code" name="code" value="{{ form.code }}" class="w-full px-2 py-1 border border-gray-300 rounded-sm text-sm focus:outline-none focus:ring-1 focus:ring-blue-500" required>
                    {% if error.code %}<p class="text-red-500 text-xs mt-1">{{ error.code }}</p>{% endif %}
                </div>
                <div class="mb-3">
                    <label for="discount_amount" class="block text-sm font-medium text-gray-700">Discount Amount (₹)</label>
                    <input type="number" id="discount_amount" name="discount_amount" value="{{ form.discount_amount }}" step="0.01" class="w-full px-2 py-1 border border-gray-300 rounded-sm text-sm focus:outline-none focus:ring-1 focus:ring-blue-500" required>
                    {% if error.discount_amount %}<p class="text-red-500 text-xs mt-1">{{ error.discount_amount }}</p>{% endif %}
                </div>
                <div class="mb-3">
                    <label for="minimum_order_amount" class="block text-sm font-medium text-gray-700">Min Order Amount (₹)</label>
                    <input type="number" id="minimum_order_amount" name="minimum_order_amount" value="{{ form.minimum_order_amount }}" step="0.01" class="w-full px-2 py-1 border border-gray-300 rounded-sm text-sm focus:outline-none focus:ring-1 focus:ring-blue-500" required>
                    {% if error.minimum_order_amount %}<p class="text-red-500 text-xs mt-1">{{ error.minimum_order_amount }}</p>{% endif %}
                </div>
                <div class="mb-3">
                    <label for="valid_from" class="block text-sm font-medium text-gray-700">Valid From</label>
                    <input type="date" id="valid_from" name="valid_from" value="{{ form.valid_from }}" class="w-full px-2 py-1 border border-gray-300 rounded-sm text-sm focus:outline-none focus:ring-1 focus:ring-blue-500" required>
                    {% if error.valid_from %}<p class="text-red-500 text-xs mt-1">{{ error.valid_from }}</p>{% endif %}
                </div>
                <div class="mb-3">
                    <label for="valid_to" class="block text-sm font-medium text-gray-700">Valid To</label>
                    <input type="date" id="valid_to" name="valid_to" value="{{ form.valid_to }}" class="w-full px-2 py-1 border border-gray-300 rounded-sm text-sm focus:outline-none focus:ring-1 focus:ring-blue-500" required>
                    {% if error.valid_to %}<p class="text-red-500 text-xs mt-1">{{ error.valid_to }}</p>{% endif %}
                </div>
                <div class="mb-3">
                    <label class="block text-sm font-medium text-gray-700">Active</label>
                    <input type="checkbox" id="active" name="active" {% if form.active %}checked{% endif %} class="h-4 w-4 text-blue-600 focus:ring-blue-500">
                </div>
                <button type="submit" class="w-full bg-blue-700 text-white px-3 py-1 rounded-sm text-sm hover:bg-blue-800 transition-colors">{% if form.coupon_id %}Update Coupon{% else %}Create Coupon{% endif %}</button>
            </form>

            <!-- Display Messages -->
            {% if messages %}
            <div class="mt-4">
                {% for message in messages %}
                <div class="p-2 rounded">
                    {% if message.tags == 'success' %}
                        <div class="bg-green-100 text-green-800 text-sm">
                            {{ message }}
                        </div>
                    {% else %}
                        <div class="bg-red-100 text-red-800 text-sm">
                            {{ message }}
                        </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}